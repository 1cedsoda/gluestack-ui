import { Canvas, Meta, Story } from '@storybook/addon-docs';

<Meta title="components/Menu" />

import { MenuTemp as Menu, Text, Pressable, View } from './Menu';
import { Wrapper } from '../Wrapper';

import { AppProvider, CodePreview, Table } from '@gluestack/design-system';

# Menu

"Menu" component is used to create a menu of options that can be displayed on demand in React Native. In React Native, the Menu component can be generated using a third-party accessibility-focused library that uses "styled views", "Pressable" and "Text" to define the layout, visual design, and behavior of the component.

<br />

## Usage

<AppProvider>
  <CodePreview
    showComponentRenderer={true}
    showArgsController={false}
    metaData={{
      code: ` 
      function App () {
        return (
           <Wrapper>
            <View style={{height:"50vh"}}>
               <Menu
              placement={'right'}
              trigger={(triggerProps) => {
                 console.log(triggerProps)
                return (
                  <Pressable  {...triggerProps} >
                    <Text>Menu</Text>
                  </Pressable>
                );
              }}
            >
              <Menu.Content zIndex={100}>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>Arial</Text>
                </Menu.Item>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>Nunito Sans</Text>
                </Menu.Item>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>Roboto</Text>
                </Menu.Item>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>Poppins</Text>
                </Menu.Item>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>SF Pro</Text>
                </Menu.Item>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>Helvetica</Text>
                </Menu.Item>
                <Menu.Item isDisabled>
                  <Text style={{ padding: 12 }}>Sofia</Text>
                </Menu.Item>
                <Menu.Item>
                  <Text style={{ padding: 12 }}>Cookie</Text>
                </Menu.Item>
              </Menu.Content>
              <Menu.Backdrop />
            </Menu>
            </View>  
          </Wrapper>
       )
    }`,
      scope: { Menu: Menu, Wrapper: Wrapper, Text: Text, Pressable, View },
      argsType: {},
    }}
  />
</AppProvider>

<br />

## Features

- Keyboard support for actions.
- Support for hover, focus and active states.

## Installation

```jsx
yarn add @universa11y/menu
```

## Usage

```jsx
import { createMenu } from '@universa11y/menu';
const Menu = createMenu({
  Root,
  Backdrop,
  Content,
  Group,
  GroupTitle,
  MenuItem,
});
```

These are the styled components that we need to pass in the creator API:

### Root

```jsx
const Root = styled(
  View,
  {
    ...
  },
);
```

### Backdrop

```jsx
const Backdrop = styled(
  Pressable,
  {
    ...
  },
);
```

### Content

```jsx
const Content = styled(
  View,
  {
    ...
  },
);
```

### Group

```jsx
const Group = styled(
  View,
  {
    ...
  },
);
```

### GroupTitle

```jsx
const GroupTitle = styled(
  View,
  {
    ...
  },
);
```

### MenuItem

```jsx
const MenuItem = styled(
  Pressable,
  {
    ...
  },
);
```

## Anatomy

```jsx
export default () => (
  <Menu>
    <Menu.Content>
      <Menu.Item></Menu.Item>
    </Menu.Content>
    <Menu.Backdrop />
  </Menu>
);
```

## API Reference

### Menu

Contains all menu related layout style props and actions.
It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

<AppProvider>
  <Table>
    <Table.THead sx={{ _dark: { bg: '$gray800' }, _light: { bg: '$gray100' } }}>
      <Table.TR>
        <Table.TH>
          <Text>Prop</Text>
        </Table.TH>
        <Table.TH>
          <Text>Type</Text>
        </Table.TH>
        <Table.TH>
          <Text>Default</Text>
        </Table.TH>
        <Table.TH>
          <Text>Description</Text>
        </Table.TH>
      </Table.TR>
    </Table.THead>
    <Table.TBody>
      <Table.TR>
        <Table.TD>
          <Text>trigger</Text>
        </Table.TD>
        <Table.TD>
          <Text>{'(_props: any, state: { open: boolean; }) => Element'}</Text>
        </Table.TD>
        <Table.TD>
          <Text></Text>
        </Table.TD>
        <Table.TD>
          <Text>
            Function that returns a React Element. This element will be used as
            a Trigger for the menu.
          </Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>placement</Text>
        </Table.TD>
        <Table.TD>
          <Text>
            {
              '"bottom" | "top" | "right" | "left" | "top left" | "top right" | "bottom left" | "bottom right" | "right top" | "right bottom" | "left top" | "left bottom"'
            }
          </Text>
        </Table.TD>
        <Table.TD>
          <Text>bottom left</Text>
        </Table.TD>
        <Table.TD>
          <Text>menu placement</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>defaultIsOpen</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>false</Text>
        </Table.TD>
        <Table.TD>
          <Text>If true, the menu will be opened by default.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>closeOnOverlayClick</Text>
        </Table.TD>
        <Table.TD>
          <Text>bool</Text>
        </Table.TD>
        <Table.TD>
          <Text>true</Text>
        </Table.TD>
        <Table.TD>
          <Text>closes menu when clicked outside</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>onOpen</Text>
        </Table.TD>
        <Table.TD>
          <Text>{'() => void'}</Text>
        </Table.TD>
        <Table.TD>
          <Text>true</Text>
        </Table.TD>
        <Table.TD>
          <Text>This function will be invoked when the menu is opened.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>onClose</Text>
        </Table.TD>
        <Table.TD>
          <Text>{' () => void'}</Text>
        </Table.TD>
        <Table.TD>
          <Text></Text>
        </Table.TD>
        <Table.TD>
          <Text>
            This function will be invoked when menu is closed. It will also be
            called when the user attempts to close the menu via Escape key or
            backdrop press.
          </Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>isOpen</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>false</Text>
        </Table.TD>
        <Table.TD>
          <Text>
            Whether the menu is opened. Useful for controlling the open state.
          </Text>
        </Table.TD>
      </Table.TR>
    </Table.TBody>
  </Table>
</AppProvider>

### Backdrop

Contains all backdrop related layout style props and actions.
It inherits all the properties of React Native's [Pressable](https://reactnative.dev/docs/pressable#props) component.

### Content

Contains all content related layout style props and actions.
It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### Group

Contains all group related layout style props and actions.
It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### GroupTitle

Contains all button related layout style props and actions.
It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### MenuItem

Contains all button related layout style props and actions.
It inherits all the properties of React Native's [Pressable](https://reactnative.dev/docs/pressable#props) component.

## Accessibility

Adheres to the [MENU WAI-ARIA design pattern]('https://www.w3.org/WAI/ARIA/apg/#menu').

## Dependencies

- `@universa11y/utils`
- `@react-native-aria/focus`
- `react-native-svg`
