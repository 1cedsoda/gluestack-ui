import { Canvas, Meta, Story } from '@storybook/addon-docs';

<Meta title="components/AlertDialog" />

import { AccessibleAlertDialog, CloseIcon } from './AlertDialog';
import { Wrapper } from '../Wrapper';

import { useState } from 'react';

import {
  AppProvider,
  CodePreview,
  Table,
  Text,
} from '@gluestack/design-system';

import { Pressable, Text as RNText } from 'react-native';

# AlertDialog

A AlertDialog is an overlay on the primary window or another dialog window. Content behind the AlertDialog dialog remains inert and users cannot interact with it.

<AppProvider>
  <CodePreview
    showComponentRenderer={true}
    showArgsController={false}
    metaData={{
      code: ` 
      function App () {
  const [showAlertDialog, setShowAlertDialog] = useState(false);
        return (
          <Wrapper>
         <Pressable onPress={() => setShowAlertDialog(true)}>
        <RNText>Click Me</RNText>
      </Pressable>
      <AlertDialog
        isOpen={showAlertDialog}
        onClose={() => {
          setShowAlertDialog(false);
        }}
      >
        <AlertDialog.Backdrop />
        <AlertDialog.Content>
          <AlertDialog.CloseButton>
            <CloseIcon sx={{ w: 16, h: 16 }} />
          </AlertDialog.CloseButton>
          <AlertDialog.Header>
            <RNText>Return Policy</RNText>
          </AlertDialog.Header>
          <AlertDialog.Body>
            <RNText>
              Create a 'Return Request' under "My Orders" section of App/Website. Follow the screens that come up after tapping on the 'Return' button. Please make a note of the Return ID that we generate at the end of the process. Keep the item ready for pick up or ship it to us basis on the return mode.
            </RNText>
          </AlertDialog.Body>
          <AlertDialog.Footer>
            <Pressable
              // variant="solid"
              onPress={() => {
                setShowAlertDialog(false);
              }}
            >
              <RNText>Cancel</RNText>
            </Pressable>
          </AlertDialog.Footer>
        </AlertDialog.Content>
      </AlertDialog>
          </Wrapper>
    )
    }`,
      scope: {
        AlertDialog: AccessibleAlertDialog,
        Wrapper,
        Pressable,
        useState,
        CloseIcon,
        RNText,
      },
      argsType: {},
    }}
  />
</AppProvider>

<br />

## Features

- Keyboard support for actions.
- Support for hover, focus and active states.

## Installation

```jsx
yarn add @universa11y/alert-dialog
```

## Usage

```jsx
import { createAlertDialog } from '@universa11y/alert-dialog';
const AlertDialog = createAlertDialog({
  Root,
  Content,
  CloseButton,
  Header,
  Footer,
  Body,
  Backdrop,
});
```

These are the styled components that we need to pass in the creator API:

### Root

```jsx
const Root = styled(
  Pressable,
  {
    ...
  },
);
```

### Content

```jsx
import { styled } from '@dank-style/react';
const Content = styled(
  Text,
  {
    ...
  },
);
```

### CloseButton

```jsx
import { styled } from '@dank-style/react';
const CloseButton = styled(
  View,
  {
    ...
  },
);
```

### Header

```jsx
import { styled } from '@dank-style/react';
const Header = styled(
  ActivityIndicator,
  {
    ...
  },
);
```

### Footer

```jsx
import { styled } from '@dank-style/react';
const Footer = styled(
  View,
  {
    ...
  },
);
```

### Body

```jsx
import { styled } from '@dank-style/react';
const Body = styled(
  View,
  {
    ...
  },
);
```

### Backdrop

```jsx
import { styled } from '@dank-style/react';
const Backdrop = styled(
  View,
  {
    ...
  },
);
```

## Anatomy

```jsx
export default () => (
  <AlertDialog>
    <AlertDialog.Backdrop />
    <AlertDialog.Content>
      <AlertDialog.CloseButton></AlertDialog.CloseButton>
      <AlertDialog.Header></AlertDialog.Header>
      <AlertDialog.Body></AlertDialog.Body>
      <AlertDialog.Footer></AlertDialog.Footer>
    </AlertDialog.Content>
  </AlertDialog>
);
```

## API Reference

### AlertDialog

Contains all button related layout style props and actions.
It inherits all the properties of React Native's [Pressable](https://reactnative.dev/docs/pressable#props) component.

<AppProvider>
  <Table>
    <Table.THead sx={{ _dark: { bg: '$gray800' }, _light: { bg: '$gray100' } }}>
      <Table.TR>
        <Table.TH>
          <Text>Prop</Text>
        </Table.TH>
        <Table.TH>
          <Text>Type</Text>
        </Table.TH>
        <Table.TH>
          <Text>Default</Text>
        </Table.TH>
        <Table.TH>
          <Text>Description</Text>
        </Table.TH>
      </Table.TR>
    </Table.THead>
    <Table.TBody>
      <Table.TR>
        <Table.TD>
          <Text>isOpen</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>
            If true, the AlertDialog will open. Useful for controllable state
            behavior.
          </Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>onClose</Text>
        </Table.TD>
        <Table.TD>
          <Text>{`() => any`}</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>Callback invoked when the AlertDialog is closed.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>useRNAlertDialog</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>false</Text>
        </Table.TD>
        <Table.TD>
          <Text>If true, renders react-native native AlertDialog.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>defaultIsOpen</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>Specifies the default open state of the AlertDialog.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>initialFocusRef</Text>
        </Table.TD>
        <Table.TD>
          <Text>{`React.RefObject<any>`}</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>
            The ref of element to receive focus when the AlertDialog opens.
          </Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>finalFocusRef</Text>
        </Table.TD>
        <Table.TD>
          <Text>{`React.RefObject<any>`}</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>
            The ref of element to receive focus when the AlertDialog closes
          </Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>avoidKeyboard</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>If true, the AlertDialog will avoid the keyboard.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>closeOnOverlayClick</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>
            If true, the AlertDialog will close when the overlay is clicked.
          </Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>isKeyboardDismissable</Text>
        </Table.TD>
        <Table.TD>
          <Text>boolean</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>If true, the keyboard can dismiss the AlertDialog.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>animationPreset</Text>
        </Table.TD>
        <Table.TD>
          <Text>`'slide'` &#124; `'fade'`</Text>
        </Table.TD>
        <Table.TD>
          <Text>`'slide'`</Text>
        </Table.TD>
        <Table.TD>
          <Text>Specifies the animation preset for the AlertDialog.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>contentSize</Text>
        </Table.TD>
        <Table.TD>
          <Text>any</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>Specifies the content size for the AlertDialog.</Text>
        </Table.TD>
      </Table.TR>
      <Table.TR>
        <Table.TD>
          <Text>children</Text>
        </Table.TD>
        <Table.TD>
          <Text>any</Text>
        </Table.TD>
        <Table.TD>
          <Text>-</Text>
        </Table.TD>
        <Table.TD>
          <Text>The content to display inside the AlertDialog.</Text>
        </Table.TD>
      </Table.TR>
    </Table.TBody>
  </Table>
</AppProvider>

### AlertDialog.Backdrop

It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### AlertDialog.CloseButton

It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### AlertDialog.Header

It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### AlertDialog.Body

It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

### AlertDialog.Footer

It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view#props) component.

## Example

<AppProvider>
  <CodePreview
    showComponentRenderer={true}
    showArgsController={false}
    metaData={{
      code: ` 
      function App () {
  const [showAlertDialog, setShowAlertDialog] = useState(false);
        return (
          <Wrapper>
         <Pressable onPress={() => setShowAlertDialog(true)}>
        <RNText>Click Me</RNText>
      </Pressable>
      <AlertDialog
        isOpen={showAlertDialog}
        onClose={() => {
          setShowAlertDialog(false);
        }}
      >
        <AlertDialog.Backdrop />
        <AlertDialog.Content>
          <AlertDialog.CloseButton>
            <CloseIcon sx={{ w: 16, h: 16 }} />
          </AlertDialog.CloseButton>
          <AlertDialog.Header>
            <RNText>Return Policy</RNText>
          </AlertDialog.Header>
          <AlertDialog.Body>
            <RNText>
              Create a 'Return Request' under "My Orders" section of App/Website. Follow the screens that come up after tapping on the 'Return' button. Please make a note of the Return ID that we generate at the end of the process. Keep the item ready for pick up or ship it to us basis on the return mode.
            </RNText>
          </AlertDialog.Body>
          <AlertDialog.Footer>
            <Pressable
              // variant="solid"
              onPress={() => {
                setShowAlertDialog(false);
              }}
            >
              <RNText>Cancel</RNText>
            </Pressable>
          </AlertDialog.Footer>
        </AlertDialog.Content>
      </AlertDialog>
          </Wrapper>
    )
    }`,
      scope: {
        AlertDialog: AccessibleAlertDialog,
        Wrapper,
        Pressable,
        useState,
        CloseIcon,
        RNText,
      },
      argsType: {},
    }}
  />
</AppProvider>

## Accessibility

Uses React Native ARIA [@react-native-aria/focus](https://react-native-aria.geekyants.com/docs/FocusScope) which follows the [Dialog AlertDialog WAI-ARIA design pattern](https://www.w3.org/WAI/ARIA/apg/#dialog_AlertDialog)
.

## Dependencies

- `@universa11y/utils`
- `@react-native-aria/focus`
- `react-native-svg`
- `@universa11y/hooks`
- `@universa11y/icon`
- `@universa11y/overlay`
- `@universa11y/react-native-aria`
- `@universa11y/transitions`
